<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecture Notes - SCRIBE</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/course1.css">
    <link rel="stylesheet" href="/css/lecture-notes.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <h1>SCRIBE</h1>
            </div>
            <nav class="nav-menu">
                <a href="/studentdashboard.html" class="nav-item">
                    <i class="bi bi-house"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item back-to-course">
                    <i class="bi bi-arrow-left"></i>
                    <span>Back to Course</span>
                </a>
            </nav>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <div class="lecture-header">
                <div class="header-content">
                    <h1 id="lectureTitle">Loading...</h1>
                    <div class="lecture-meta">
                        <span id="lectureDate"></span>
                    </div>
                </div>
                <button id="modifyNotesBtn" class="modify-notes-btn" aria-label="Modify Notes">
                    <i class="bi bi-three-dots-vertical"></i>
                </button>
            </div>

            <div class="breadcrumb">
                <a href="#" id="courseBreadcrumb">Loading...</a>
                <i class="bi bi-chevron-right"></i>
                <span id="lectureBreadcrumb">Loading...</span>
            </div>

            <div class="content-grid">
                <!-- Audio Player Section -->
                <section id="audio-section" class="audio-section" style="display: none;">
                    <h2>Lecture Recording</h2>
                    <audio id="lectureAudio" controls></audio>
                </section>

                <!-- Transcription Section -->
                <section id="transcription-section" class="transcription-section">
                    <h2>Lecture Transcription</h2>
                    <div id="transcriptionText" class="transcription-content definable"></div>
                </section>

                <!-- Notes Section -->
                <section id="notes-section" class="notes-section">
                    <h2>My Notes</h2>
                    <div class="notes-editor">
                        <textarea id="notesEditor" placeholder="Type your notes here..."></textarea>
                        <button id="saveNotes" class="save-btn">Save Notes</button>
                    </div>
                </section>

                <!-- Enhanced Summary Section -->
                <section id="summary-section" class="summary-section" style="display: none;" data-definitions-enabled="true">
                    <h2>Lecture Summary</h2>
                    <div class="summary-content">
                        <h3 class="summary-title"></h3>
                        
                        <!-- Context and Significance -->
                        <div class="summary-overview">
                            <h4>Context & Purpose</h4>
                            <div class="overview-box">
                                <p class="definable"><strong>Main Theme:</strong> <span id="mainThesis"></span></p>
                                <p class="definable"><strong>Scientific Context:</strong> <span id="context"></span></p>
                                <p class="definable"><strong>Real-World Significance:</strong> <span id="significance"></span></p>
                            </div>
                        </div>

                        <!-- Main Discussion Points -->
                        <div class="key-points">
                            <h4>Main Discussion Points</h4>
                            <div id="keyPoints"></div>
                        </div>

                        <!-- Practical Applications -->
                        <div class="practical-applications">
                            <h4>Practical Applications & Real-World Examples</h4>
                            <div id="applications"></div>
                        </div>

                        <!-- Study Guide -->
                        <div class="study-guide">
                            <h4>Key Takeaways & Study Guide</h4>
                            <div id="studyGuide"></div>
                        </div>
                    </div>
                </section>

                <!-- Visual Learning Section -->
                <section id="visual-learning-section" class="visual-learning-section" style="display: none;">
                    <h2>Visual Learning</h2>
                    <div class="visual-content">
                        <!-- Visual learning content here -->
                    </div>
                </section>

                <!-- Interactive Learning Section -->
                <section id="kinesthetic-section" class="kinesthetic-section" style="display: none;">
                    <h2>Interactive Learning</h2>
                    <div class="interactive-content">
                        <!-- Interactive learning content here -->
                    </div>
                    <div class="quiz-controls">
                        <button class="check-answers-btn">Check Answers</button>
                        <button class="reset-quiz-btn">Reset Quiz</button>
                        <button class="explanation-btn" disabled>Show Explanation</button>
                    </div>
                </section>

                <!-- Flashcards Section -->
                <section id="flashcards-section" class="flashcards-section" style="display: none;">
                    <h2>Flashcards</h2>
                    <div class="flashcards-content">
                        <!-- Flashcards content here -->
                    </div>
                </section>
            </div>

            <!-- Quick Jump Menu -->
            <div class="quick-jump">
                <button class="quick-jump-btn" onclick="toggleQuickJump()">
                    <i class="bi bi-list"></i>
                    Quick Jump
                </button>
                <div class="quick-jump-menu">
                    <!-- Quick Jump menu content will be dynamically populated -->
                </div>
            </div>
        </main>

        <!-- Modify Notes Sidebar -->
        <div id="modifySidebar" class="modify-sidebar">
            <div class="sidebar-header">
                <h3>Modify Your Notes</h3>
                <button id="closeSidebar" class="close-btn" aria-label="Close sidebar">Ã—</button>
            </div>
            <div class="sidebar-content">
                <div class="preferences-section">
                    <div class="preference-card">
                        <div class="preference-icon">
                            <i class="bi bi-file-text"></i>
                        </div>
                        <div class="preference-details">
                            <h4>Summarization</h4>
                            <p>Generate a concise summary of the lecture content</p>
                            <label class="toggle-switch">
                                <input type="checkbox" id="summarization">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="preference-card">
                        <div class="preference-icon">
                            <i class="bi bi-card-text"></i>
                        </div>
                        <div class="preference-details">
                            <h4>Flashcards</h4>
                            <p>Create study flashcards from key concepts</p>
                            <label class="toggle-switch">
                                <input type="checkbox" id="flashcards">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="preference-card">
                        <div class="preference-icon">
                            <i class="bi bi-volume-up"></i>
                        </div>
                        <div class="preference-details">
                            <h4>Audio</h4>
                            <p>Show lecture recording player</p>
                            <label class="toggle-switch">
                                <input type="checkbox" id="audio">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="preference-card">
                        <div class="preference-icon">
                            <i class="bi bi-eye"></i>
                        </div>
                        <div class="preference-details">
                            <h4>Visual Learning</h4>
                            <p>Convert key concepts into diagrams, mind maps, and visual aids</p>
                            <label class="toggle-switch">
                                <input type="checkbox" id="visual">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="preference-card">
                        <div class="preference-icon">
                            <i class="bi bi-hand-index"></i>
                        </div>
                        <div class="preference-details">
                            <h4>Kinesthetic Learning</h4>
                            <p>Transform concepts into interactive exercises and hands-on activities</p>
                            <label class="toggle-switch">
                                <input type="checkbox" id="kinesthetic">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="save-button-container">
                    <button class="preferences-save-btn" id="savePreferences">
                        <i class="bi bi-check2"></i>
                        Apply Changes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/definitions.js"></script>
    <script src="/js/student-lecture-notes.js"></script>
    <script>
        // Simple function to toggle quick jump menu
        function toggleQuickJump() {
            const menu = document.querySelector('.quick-jump-menu');
            menu.classList.toggle('show');
        }

        // Enhanced scroll function
        function scrollToSection(sectionId) {
            console.log('Attempting to scroll to:', sectionId);
            // Try different ways to find the section
            const section = document.querySelector(`section#${sectionId}, section.${sectionId}`);
            
            if (section) {
                console.log('Found section:', sectionId, 'Current display:', section.style.display);
                
                // Show the section if it's hidden
                if (section.style.display === 'none') {
                    const checkboxId = {
                        'audio-section': 'audio',
                        'summary-section': 'summarization',
                        'flashcards-section': 'flashcards',
                        'visual-learning-section': 'visual',
                        'kinesthetic-section': 'kinesthetic'
                    }[sectionId];

                    console.log('Looking for checkbox:', checkboxId);
                    const checkbox = document.getElementById(checkboxId);
                    if (checkbox) {
                        console.log('Found checkbox, setting checked');
                        checkbox.checked = true;
                        section.style.display = 'block';
                    }
                }

                // Force a reflow to ensure the section is visible
                void section.offsetHeight;

                // Scroll to the section
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });

                // Close the menu
                document.querySelector('.quick-jump-menu').classList.remove('show');
            } else {
                console.error('Section not found:', sectionId);
                // Log all available sections for debugging
                const allSections = document.querySelectorAll('section');
                console.log('Available sections:', Array.from(allSections).map(s => ({
                    id: s.id,
                    className: s.className,
                    display: s.style.display
                })));
            }
        }

        // Update the quick jump menu items
        function updateQuickJumpMenu() {
            const menu = document.querySelector('.quick-jump-menu');
            menu.innerHTML = '';

            // Always show these sections
            const alwaysVisibleSections = [
                { id: 'transcription-section', name: 'Lecture Transcription', icon: 'bi-text-paragraph' },
                { id: 'notes-section', name: 'My Notes', icon: 'bi-journal-text' }
            ];

            // Optional sections controlled by preferences
            const optionalSections = [
                { id: 'audio-section', name: 'Audio Player', icon: 'bi-mic', checkboxId: 'audio' },
                { id: 'summary-section', name: 'Summary', icon: 'bi-card-text', checkboxId: 'summarization' },
                { id: 'visual-learning-section', name: 'Visual Learning', icon: 'bi-image', checkboxId: 'visual' },
                { id: 'kinesthetic-section', name: 'Interactive Learning', icon: 'bi-puzzle', checkboxId: 'kinesthetic' },
                { id: 'flashcards-section', name: 'Flashcards', icon: 'bi-card-list', checkboxId: 'flashcards' }
            ];

            // Add always visible sections
            alwaysVisibleSections.forEach(section => {
                const sectionElement = document.querySelector(`section#${section.id}`);
                if (sectionElement) {
                    const item = document.createElement('div');
                    item.className = 'quick-jump-item';
                    item.innerHTML = `<i class="bi ${section.icon}"></i>${section.name}`;
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        scrollToSection(section.id);
                    });
                    menu.appendChild(item);
                }
            });

            // Add optional sections if their checkbox is checked
            optionalSections.forEach(section => {
                const checkbox = document.getElementById(section.checkboxId);
                const sectionElement = document.querySelector(`section#${section.id}`);
                if (checkbox && checkbox.checked && sectionElement) {
                    const item = document.createElement('div');
                    item.className = 'quick-jump-item';
                    item.innerHTML = `<i class="bi ${section.icon}"></i>${section.name}`;
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        scrollToSection(section.id);
                    });
                    menu.appendChild(item);
                }
            });
        }

        // Handle preferences
        document.addEventListener('DOMContentLoaded', function() {
            const savePreferences = document.getElementById('savePreferences');
            
            savePreferences.addEventListener('click', function() {
                // Update section visibility
                const preferences = {
                    'audio': 'audio-section',
                    'summarization': 'summary-section',
                    'flashcards': 'flashcards-section',
                    'visual': 'visual-learning-section',
                    'kinesthetic': 'kinesthetic-section'
                };

                Object.entries(preferences).forEach(([prefId, sectionId]) => {
                    const isChecked = document.getElementById(prefId).checked;
                    const section = document.getElementById(sectionId);
                    if (section) {
                        section.style.display = isChecked ? 'block' : 'none';
                        console.log(`Setting ${sectionId} display to:`, isChecked ? 'block' : 'none');
                    } else {
                        console.error(`Section not found: ${sectionId}`);
                    }
                });

                updateQuickJumpMenu();
                document.getElementById('modifySidebar').classList.remove('show');
            });

            // Initial menu update
            updateQuickJumpMenu();
        });

        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
            const quickJump = document.querySelector('.quick-jump');
            const menu = document.querySelector('.quick-jump-menu');
            if (!quickJump.contains(event.target) && menu.classList.contains('show')) {
                menu.classList.remove('show');
            }
        });
    </script>
</body>
</html> 